
// https://carpentries-incubator.github.io/workflows-nextflow/08-configuration/index.html


//set intermediate results folder 
//Generally, variables and functions defined in a configuration file are not accessible from the workflow script. Only variables defined using the params scope and the env scope (without env prefix) can be accessed from the workflow script.
workDir="/mnt/mnemo6/tao/nextflow/work" 


conda.enabled = true  //this line is necesseary,  https://www.nextflow.io/docs/latest/conda.html

process {
    //set output folder , https://carpentries-incubator.github.io/workflows-nextflow/05-processes-part2/index.html
    publishDir = [ path: params.outdir, mode: 'copy' ]
    
    
    withLabel: simple_process {
        cpus = 4
        memory = 64.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/nf-training"
    }
    
    withLabel: simple_py_process {
        cpus = 8
        memory = 128.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/ipykernel_py3"
    }
    
    
    withLabel: many_cpu_process {
        cpus = 60
        memory = 100.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/ipykernel_py3"
    }
    
    withLabel: large_memory_process {
        cpus = 30
        memory = 400.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/ipykernel_py3"
    }
    
    withName: prepareFastaDataBySpecies {
        cpus=32
        memory=100.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/ipykernel_py3"
        //conda="/mnt/mnemo5/tao/anaconda3/envs/nf-training"
    }
    
    
    withName: moveOnlyBacteriaSepcies {
        cpus=32
        memory=100.GB
        conda="/mnt/mnemo5/tao/anaconda3/envs/ipykernel_py3"
        //conda="/mnt/mnemo5/tao/anaconda3/envs/nf-training"
    }
}







//difference between configuration files  and parameter files
// first one is configure general nextflow setting ,  parameter files are used to set parameter used by nextflow workflow or even by configuration files ?


// https://carpentries-incubator.github.io/workflows-nextflow/08-configuration/index.html
// How configuration files are combined
// Configuration settings can be spread across several files. This also allows settings to be overridden by other configuration files. The priority of a setting is determined by the following order, ranked from highest to lowest.

// Parameters specified on the command line (--param_name value).
// Parameters provided using the -params-file option.
// Config file specified using the -c my_config option.
// The config file named nextflow.config in the current directory.
// The config file named nextflow.config in the workflow project directory ($projectDir: the directory where the script to be run is located).
// The config file $HOME/.nextflow/config.
// Values defined within the workflow script itself (e.g., main.nf).
// If configuration is provided by more than one of these methods, configuration is merged giving higher priority to configuration provided higher in the list.

// Existing configuration can be completely ignored by using -C <custom.config> to use only configuration provided in the custom.config file.